import{d as D,r as _,eG as G,o as r,c as i,g as h,F as g,a as v,j as C,w as u,e as x,t as y,b,eH as T,m as w,eL as l,u as d,eO as c,_ as $}from"./index-c7e2b012.js";import{G as j}from"./GridRect-68c34400.js";import{u as J}from"./index.es-8b07af2f.js";import{u as L,$ as M,a as k}from"./useEditorContainer-66830201.js";const R={class:"es-container"},V={class:"es-tools"},F=D({__name:"menu",setup(H){const n=_({container:{gridSize:10,snapToGrid:!0,style:{}},elements:[{id:c(),component:"div",width:100,height:100,left:100,top:100,text:"div1",style:{backgroundColor:"#fff2cc",border:"2px solid #d6b656"}},{id:c(),component:"div",width:100,height:100,left:300,top:150,text:"div2",style:{backgroundColor:"#f8cecc",border:"2px solid #b85450"}}]}),p=_(null),{onEditorContextMenu:f,onContextmenu:S}=L(n,p),N=[{label:"导出",handler:()=>{M({title:"导出",content:JSON.stringify(n.value),confirm(o){n.value=JSON.parse(o)}})}},{label:"导入",handler:()=>{k({resultType:"json",onChange(o){n.value=JSON.parse(o)}})}},{label:"插入图片",handler:()=>{k({resultType:"image",onChange(o){const t={id:c(),component:"img",props:{src:o,width:160,onLoad(s){const{naturalHeight:e,naturalWidth:a}=s.target,m=n.value.elements.find(B=>B.id===t.id);m.width=a,m.height=e}}};n.value.elements.push(t)}})}}];function E(o){n.value.elements.forEach(s=>s.selected=!1);const t=o;t.selected=!0}function O(o,t){Object.keys(o).forEach(s=>{t[s]=o[s]})}return(o,t)=>{const s=G("el-button");return r(),i("div",R,[h("div",V,[(r(),i(g,null,v(N,e=>C(s,{type:"primary",onClick:e.handler},{default:u(()=>[x(y(e.label),1)]),_:2},1032,["onClick"])),64))]),h("div",{ref_key:"editorRef",ref:p,class:"es-editor",onContextmenu:t[2]||(t[2]=l((...e)=>d(f)&&d(f)(...e),["prevent"]))},[(r(!0),i(g,null,v(n.value.elements,e=>(r(),b(d(J),w(e,{rotatable:"",onDragStart:a=>E(e),onChange:a=>O(a,e),onContextmenu:l(a=>d(S)(a,e),["stop"]),onClick:t[0]||(t[0]=l(()=>{},["stop"])),onMousedown:t[1]||(t[1]=l(()=>{},["stop"]))}),{default:u(()=>[(r(),b(T(e.component),w(e.props,{style:{...e.style,width:"100%",height:"100%"}}),{default:u(()=>[x(y(e.text),1)]),_:2},1040,["style"]))]),_:2},1040,["onDragStart","onChange","onContextmenu"]))),256)),C(j)],544)])}}});const W=$(F,[["__scopeId","data-v-76dff2a3"]]);export{W as default};
