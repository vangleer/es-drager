import{d as E,r,f as S,eG as N,o as p,c as h,g as x,j as i,w as c,e as f,F as I,a as U,b as C,eH as V,m as k,t as j,eL as b,u as l,eM as F,eN as O,eO as w,_ as $}from"./index-671aa233.js";import{G as z}from"./GridRect-d5692917.js";import{_ as H}from"./index-022e8d57.js";import{u as P,A as X}from"./useArea-89fe1d7a.js";const Y={class:"es-container"},q={class:"es-tools"},J=E({__name:"group",setup(K){const n=r({container:{gridSize:10,snapToGrid:!0,style:{}},elements:[{id:w(),component:"div",text:"div1",width:100,height:100,left:100,top:100,style:{border:"1px solid #3a7afe"}},{id:w(),component:"div",text:"div2",width:100,height:100,top:200,left:300,style:{border:"1px solid #3a7afe"}}]}),v=r(null),_=S(()=>{var t;return((t=v.value)==null?void 0:t.getBoundingClientRect())||{}}),m=r(-1),g=r(),{areaSelected:M,onEditorMouseDown:y,onAreaMove:G,onAreaUp:R}=P(n,g),a=r({prevLeft:0,prevTop:0});function D(t){M.value||n.value.elements.forEach(s=>s.selected=!1);const e=n.value.elements[t];e.selected=!0,a.value.prevLeft=e.left,a.value.prevTop=e.top,m.value=t}function L(t){const e=t.left-a.value.prevLeft,s=t.top-a.value.prevTop;n.value.elements.forEach((o,d)=>{o.selected&&m.value!==d&&(o.left+=e,o.top+=s)}),a.value.prevLeft=t.left,a.value.prevTop=t.top}function T(t,e){Object.keys(t).forEach(s=>{e[s]=t[s]})}function A(){n.value.elements=F(n.value.elements,_.value)}function B(){n.value.elements=O(n.value.elements,_.value)}return(t,e)=>{const s=N("el-button");return p(),h("div",Y,[x("div",q,[i(s,{type:"primary",onClick:A},{default:c(()=>[f("组合")]),_:1}),i(s,{type:"primary",onClick:B},{default:c(()=>[f("拆分")]),_:1})]),x("div",{ref_key:"editorRef",ref:v,class:"es-editor",onMousedown:e[3]||(e[3]=(...o)=>l(y)&&l(y)(...o))},[(p(!0),h(I,null,U(n.value.elements,(o,d)=>(p(),C(l(H),k(o,{rotatable:"",onDragStart:u=>D(d),onDrag:e[0]||(e[0]=u=>L(u)),onChange:u=>T(u,o),onClick:e[1]||(e[1]=b(()=>{},["stop"])),onMousedown:e[2]||(e[2]=b(()=>{},["stop"]))}),{default:c(()=>[(p(),C(V(o.component),k(o.props,{style:{...o.style,width:"100%",height:"100%"}}),{default:c(()=>[f(j(o.text),1)]),_:2},1040,["style"]))]),_:2},1040,["onDragStart","onChange"]))),256)),i(z),i(X,{ref_key:"areaRef",ref:g,onMove:l(G),onUp:l(R)},null,8,["onMove","onUp"])],544)])}}});const te=$(J,[["__scopeId","data-v-3f65f48b"]]);export{te as default};
