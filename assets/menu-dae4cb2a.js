import{d as T,r as v,f as d,B as $,o as r,c as p,j as x,F as C,a as y,g as c,w as i,e as m,t as b,b as k,C as j,m as w,E as u,u as l,k as G,_ as I}from"./index-43b2efc9.js";import{G as J,u as f}from"./GridRect-5a742ad9.js";import{u as M,$ as R,a as S}from"./useEditorContainer-52ed82de.js";const V={class:"es-container"},F={class:"es-tools"},L=T({__name:"menu",setup(z){const n=v({container:{gridSize:10,markline:{},snapToGrid:!0,style:{}},elements:[{id:f(),component:"div",width:100,height:100,left:100,top:100,text:"div1",style:{backgroundColor:"#fff2cc",border:"2px solid #d6b656"}},{id:f(),component:"div",width:100,height:100,left:300,top:150,text:"div2",style:{backgroundColor:"#f8cecc",border:"2px solid #b85450"}}]}),g=v(null),{onEditorContextMenu:_,onContextmenu:E}=M(n,g),N=[{label:d("examples.export"),handler:()=>{R({title:d("examples.export"),content:JSON.stringify(n.value),confirm(o){n.value=JSON.parse(o)}})}},{label:d("examples.import"),handler:()=>{S({resultType:"json",onChange(o){n.value=JSON.parse(o)}})}},{label:d("examples.uploadImage"),handler:()=>{S({resultType:"image",onChange(o){const e={id:f(),component:"img",props:{src:o,width:160,onLoad(s){if(e.props.loaded)return;const{naturalHeight:t,naturalWidth:a}=s.target,h=n.value.elements.find(O=>O.id===e.id);h.width=a,h.height=t,e.props.loaded=!0}}};n.value.elements.push(e)}})}}];function B(o){n.value.elements.forEach(s=>s.selected=!1);const e=o;e.selected=!0}function D(o,e){Object.keys(o).forEach(s=>{e[s]=o[s]})}return(o,e)=>{const s=$("el-button");return r(),p("div",V,[x("div",F,[(r(),p(C,null,y(N,t=>c(s,{type:"primary",onClick:t.handler},{default:i(()=>[m(b(t.label),1)]),_:2},1032,["onClick"])),64)),c(s,{type:"primary",onClick:e[0]||(e[0]=()=>console.log(n.value.elements))},{default:i(()=>[m("查看数据")]),_:1})]),x("div",{ref_key:"editorRef",ref:g,class:"es-editor",onContextmenu:e[3]||(e[3]=u((...t)=>l(_)&&l(_)(...t),["prevent"]))},[(r(!0),p(C,null,y(n.value.elements,t=>(r(),k(l(G),w(t,{rotatable:"",onDragStart:a=>B(t),onChange:a=>D(a,t),onContextmenu:u(a=>l(E)(a,t),["stop"]),onClick:e[1]||(e[1]=u(()=>{},["stop"])),onMousedown:e[2]||(e[2]=u(()=>{},["stop"]))}),{default:i(()=>[(r(),k(j(t.component),w(t.props,{style:{...t.style,width:"100%",height:"100%"}}),{default:i(()=>[m(b(t.text),1)]),_:2},1040,["style"]))]),_:2},1040,["onDragStart","onChange","onContextmenu"]))),256)),c(l(J))],544)])}}});const W=I(L,[["__scopeId","data-v-24837656"]]);export{W as default};
