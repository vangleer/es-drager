import{d as j,r as y,A as q,B as z,o as r,c as g,j as c,g as d,w as l,e as u,t as f,u as s,f as w,F,a as G,b as C,C as J,m as K,k as x,l as L,D as B,q as D,_ as A}from"./index-54ab47ee.js";import{G as I}from"./GridRect-bc5e5044.js";const M={class:"es-container"},P={class:"es-tools"},R={class:"es-editor"},T=j({__name:"markline",setup(U){const a=y({left:null,top:null}),_=y({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),p=S(_);function E(){p.record()}function N(t,n){Object.keys(t).forEach(e=>{n[e]=t[e]})}function S(t){const n=[];let e=-1;const o=()=>{console.log("redo",e,n),e<n.length-1&&(e++,t.value.componentList=m(n[e]))},i=()=>{console.log("undo",e,n),e>=0&&(e--,n[e]&&(t.value.componentList=m(n[e])))},v=()=>{n[++e]=m(t.value.componentList)};v();const h=O=>{const{ctrlKey:V,key:k}=O;V&&(k==="z"?i():k==="y"&&o())};return window.addEventListener("keydown",h),q(()=>{window.removeEventListener("keydown",h)}),{redo:o,undo:i,record:v}}function m(t){return JSON.parse(JSON.stringify(t))}function b(t){a.value=t}return(t,n)=>{const e=z("el-button");return r(),g("div",M,[c("div",P,[d(e,{type:"primary",onClick:s(p).undo},{default:l(()=>[u(f(s(w)("examples.undo")),1)]),_:1},8,["onClick"]),d(e,{type:"primary",onClick:s(p).redo},{default:l(()=>[u(f(s(w)("examples.redo")),1)]),_:1},8,["onClick"])]),c("div",R,[(r(!0),g(F,null,G(_.value.componentList,o=>(r(),C(s(x),K(o,{snap:"","snap-threshold":10,markline:"",onChange:i=>N(i,o),onDragEnd:E}),{default:l(()=>[(r(),C(J(o.component),null,{default:l(()=>[u(f(o.text),1)]),_:2},1024))]),_:2},1040,["onChange"]))),256)),d(s(x),{width:100,height:100,left:200,top:200,snap:"",markline:b},{default:l(()=>[u(" custom markline ")]),_:1}),L(c("div",{class:"es-editor-markline-left",style:D({left:a.value.left+"px"})},null,4),[[B,a.value.left]]),L(c("div",{class:"es-editor-markline-top",style:D({top:a.value.top+"px"})},null,4),[[B,a.value.top]]),d(s(I),{class:"grid-rect"})])])}}});const W=A(T,[["__scopeId","data-v-d372880d"]]);export{W as default};
