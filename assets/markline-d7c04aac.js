import{d as O,r as y,eF as V,eG as z,o as r,c as g,h as c,k as d,w as l,e as u,t as f,u as s,f as w,F as I,a as J,b as x,eH as K,m as j,i as C,eI as L,n as b,_ as q}from"./index-50d0385d.js";import{G as H}from"./GridRect-34b8039c.js";import{y as B}from"./index.es-d606e01b.js";const M={class:"es-container"},P={class:"es-tools"},R={class:"es-editor"},T=O({__name:"markline",setup(U){const a=y({left:null,top:null}),_=y({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),p=N(_);function D(){p.record()}function E(t,n){Object.keys(t).forEach(e=>{n[e]=t[e]})}function N(t){const n=[];let e=-1;const o=()=>{console.log("redo",e,n),e<n.length-1&&(e++,t.value.componentList=m(n[e]))},i=()=>{console.log("undo",e,n),e>=0&&(e--,n[e]&&(t.value.componentList=m(n[e])))},v=()=>{n[++e]=m(t.value.componentList)};v();const h=F=>{const{ctrlKey:G,key:k}=F;G&&(k==="z"?i():k==="y"&&o())};return window.addEventListener("keydown",h),V(()=>{window.removeEventListener("keydown",h)}),{redo:o,undo:i,record:v}}function m(t){return JSON.parse(JSON.stringify(t))}function S(t){a.value=t}return(t,n)=>{const e=z("el-button");return r(),g("div",M,[c("div",P,[d(e,{type:"primary",onClick:s(p).undo},{default:l(()=>[u(f(s(w)("examples.undo")),1)]),_:1},8,["onClick"]),d(e,{type:"primary",onClick:s(p).redo},{default:l(()=>[u(f(s(w)("examples.redo")),1)]),_:1},8,["onClick"])]),c("div",R,[(r(!0),g(I,null,J(_.value.componentList,o=>(r(),x(s(B),j(o,{snap:"","snap-threshold":10,markline:"",onChange:i=>E(i,o),onDragEnd:D}),{default:l(()=>[(r(),x(K(o.component),null,{default:l(()=>[u(f(o.text),1)]),_:2},1024))]),_:2},1040,["onChange"]))),256)),d(s(B),{width:100,height:100,left:200,top:200,snap:"",markline:S},{default:l(()=>[u(" custom markline ")]),_:1}),C(c("div",{class:"es-editor-markline-left",style:b({left:a.value.left+"px"})},null,4),[[L,a.value.left]]),C(c("div",{class:"es-editor-markline-top",style:b({top:a.value.top+"px"})},null,4),[[L,a.value.top]]),d(H,{class:"grid-rect"})])])}}});const X=q(T,[["__scopeId","data-v-49b289de"]]);export{X as default};
