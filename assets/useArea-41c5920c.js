import{d as L,r as v,h as X,j as Y,eJ as S,o as k,c as y,n as B,_ as b}from"./index-7d51d83b.js";const C=L({__name:"Area",emits:["move","up"],setup(u,{expose:r,emit:l}){const a=l,i=v(!1),o=v({width:0,height:0,top:0,left:0}),t=X(()=>{const{width:e,height:s,top:c,left:f}=o.value;return{width:e+"px",height:s+"px",top:c+"px",left:f+"px"}});function n(e){const{pageX:s,pageY:c}=e,f=e.target.getBoundingClientRect(),m=s-f.left,h=c-f.top,g=_=>{const M=_.pageX-s,x=_.pageY-c;let E=m,A=h,p=Math.abs(M),d=Math.abs(x);(p>2||d>2)&&(i.value=!0),M<0&&(E=m-p),x<0&&(A=h-d),o.value={width:p,height:d,left:E,top:A},a("move",{...o.value})},w=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",w),i.value=!1,o.value={width:0,height:0,top:0,left:0},a("up",o.value)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",w)}return r({onMouseDown:n,areaData:o}),(e,s)=>Y((k(),y("div",{class:"es-editor-area",style:B(t.value)},null,4)),[[S,i.value]])}}),T=b(C,[["__scopeId","data-v-0f3a726e"]]);function U(u,r){const l=v();function a(t){let n=!1;u.value.elements.forEach(e=>{e.selected&&(e.selected=!1,n=!0)}),n||r.value.onMouseDown(t)}function i(t){for(let n=0;n<u.value.elements.length;n++){const e=u.value.elements[n],s=t.left<e.left&&t.left+t.width>e.left+e.width,c=t.top<e.top&&t.top+t.height>e.top+e.height;s&&c?e.selected=!0:e.selected=!1}}function o(){l.value=u.value.elements.some(t=>t.selected),l.value&&setTimeout(()=>{document.addEventListener("click",()=>{l.value=!1},{once:!0})})}return{areaSelected:l,onEditorMouseDown:a,onAreaMove:i,onAreaUp:o}}export{T as A,U as u};
