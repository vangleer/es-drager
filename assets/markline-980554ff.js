import{d as j,r as w,z as q,A as F,o as d,c as x,i,g as p,w as r,e as u,t as _,u as s,f as C,F as G,a as J,b as L,B as K,m as R,k as S,C as B,y as D,p as A,j as M,_ as P}from"./index-394668c0.js";import{G as T}from"./GridRect-e927bd1d.js";import{_ as E}from"./index-0c8ad8ec.js";const U=l=>(A("data-v-5ad6d4fa"),l=l(),M(),l),$={class:"es-container"},H={class:"es-tools"},Q={class:"es-editor"},W=U(()=>i("div",{class:"editor-center"},null,-1)),X=j({__name:"markline",setup(l){const a=w({left:null,top:null}),v=w({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),m=I(v);function N(){m.record()}function b(t,o){Object.keys(t).forEach(e=>{o[e]=t[e]})}function I(t){const o=[];let e=-1;const n=()=>{console.log("redo",e,o),e<o.length-1&&(e++,t.value.componentList=f(o[e]))},c=()=>{console.log("undo",e,o),e>=0&&(e--,o[e]&&(t.value.componentList=f(o[e])))},k=()=>{o[++e]=f(t.value.componentList)};k();const y=O=>{const{ctrlKey:V,key:g}=O;V&&(g==="z"?c():g==="y"&&n())};return window.addEventListener("keydown",y),q(()=>{window.removeEventListener("keydown",y)}),{redo:n,undo:c,record:k}}function f(t){return JSON.parse(JSON.stringify(t))}function z(t){a.value=t}function h(t){return[document.querySelector(".editor-center")]}return(t,o)=>{const e=F("el-button");return d(),x("div",$,[i("div",H,[p(e,{type:"primary",onClick:s(m).undo},{default:r(()=>[u(_(s(C)("examples.undo")),1)]),_:1},8,["onClick"]),p(e,{type:"primary",onClick:s(m).redo},{default:r(()=>[u(_(s(C)("examples.redo")),1)]),_:1},8,["onClick"])]),i("div",Q,[(d(!0),x(G,null,J(v.value.componentList,n=>(d(),L(s(E),R(n,{snap:"","snap-threshold":10,markline:"",extraLines:h,onChange:c=>b(c,n),onDragEnd:N}),{default:r(()=>[(d(),L(K(n.component),null,{default:r(()=>[u(_(n.text),1)]),_:2},1024))]),_:2},1040,["onChange"]))),256)),p(s(E),{width:100,height:100,left:200,top:200,snap:"",markline:z,extraLines:h},{default:r(()=>[u(" custom markline ")]),_:1}),S(i("div",{class:"es-editor-markline-left",style:D({left:a.value.left+"px"})},null,4),[[B,a.value.left]]),S(i("div",{class:"es-editor-markline-top",style:D({top:a.value.top+"px"})},null,4),[[B,a.value.top]]),p(s(T),{class:"grid-rect"}),W])])}}});const te=P(X,[["__scopeId","data-v-5ad6d4fa"]]);export{te as default};
