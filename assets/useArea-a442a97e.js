import{d as A,r as d,g as L,i as y,f8 as X,o as Y,c as S,n as k,_ as B}from"./index-efd6d050.js";const b=A({__name:"Area",emits:["move","up"],setup(u,{expose:a,emit:s}){const i=d(!1),n=d({width:0,height:0,top:0,left:0}),f=L(()=>{const{width:o,height:e,top:l,left:c}=n.value;return{width:o+"px",height:e+"px",top:l+"px",left:c+"px"}});function t(o){const{pageX:e,pageY:l}=o,c=o.target.getBoundingClientRect(),v=e-c.left,h=l-c.top,m=g=>{const w=g.pageX-e,x=g.pageY-l;let M=v,E=h,r=Math.abs(w),p=Math.abs(x);(r>2||p>2)&&(i.value=!0),w<0&&(M=v-r),x<0&&(E=h-p),n.value={width:r,height:p,left:M,top:E},s("move",{...n.value})},_=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",_),i.value=!1,n.value={width:0,height:0,top:0,left:0},s("up",n.value)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",_)}return a({onMouseDown:t,areaData:n}),(o,e)=>y((Y(),S("div",{class:"es-editor-area",style:k(f.value)},null,4)),[[X,i.value]])}});const R=B(b,[["__scopeId","data-v-136196f6"]]);function T(u,a){const s=d();function i(t){let o=!1;u.value.elements.forEach(e=>{e.selected&&(e.selected=!1,o=!0)}),o||a.value.onMouseDown(t)}function n(t){for(let o=0;o<u.value.elements.length;o++){const e=u.value.elements[o],l=t.left<e.left&&t.left+t.width>e.left+e.width,c=t.top<e.top&&t.top+t.height>e.top+e.height;l&&c?e.selected=!0:e.selected=!1}}function f(){s.value=u.value.elements.some(t=>t.selected),s.value&&setTimeout(()=>{document.addEventListener("click",()=>{s.value=!1},{once:!0})})}return{areaSelected:s,onEditorMouseDown:i,onAreaMove:n,onAreaUp:f}}export{R as A,T as u};
