import{d as A,r as D,D as Q,o as i,c as x,E as oe,e as R,t as O,G as ce,_ as T,h as $,n as L,z as m,l as t,w as l,i as q,F as H,a as E,u as d,H as re,b as I,I as ne,m as K,A as te,J as W,K as N,L as se,p as ve,q as _e,C as X,s as le,M as fe,N as F,O as ge,g as me,P as he,Q as be,R as ye,S as we,T as xe,U as Ve,V as Ce,W as ke,X as ze,Y as Se,Z as Me}from"./index-3ce38b1c.js";import{a as $e,d as He,G as Ue,u as ue}from"./GridRect-db19ab41.js";import{u as Re,A as Ie}from"./useArea-ea0cac7e.js";import{u as Be,$ as Ee,a as de}from"./useEditorContainer-84212f7d.js";const qe=["fontSize","lineHeight","borderWidth","borderRadius"],ie=["fontSize","fontWeight","fontFamily","color","lineHeight","fontStyle","textDecoration","justifyContent","alignItems"];function ee(v,e=!0){if(!v)return v;const f={},a=Object.keys(v).filter(o=>e?ie.includes(o):!ie.includes(o));for(const o of a)f[o]=qe.includes(o)?$e(v[o]):v[o];return f}function Ae(v,e){return Object.keys(v).reduce((f,a)=>(e.includes(a)||(f[a]=v[a]),f),{})}const De=["contenteditable"],Le=A({__name:"TextEditor",props:{editable:{type:Boolean,default:!1},text:{type:String}},setup(v){const e=v,f=D();function a(){if(!f.value)return;const o=document.createRange();o.selectNode(f.value),window.getSelection().removeAllRanges(),window.getSelection().addRange(o)}return Q(()=>[e.editable],()=>{e.editable&&a()}),(o,c)=>(i(),x("div",{ref_key:"textRef",ref:f,class:ce(["es-text",{editable:v.editable}]),contenteditable:v.editable},[oe(o.$slots,"default",{},()=>[R(O(v.text),1)],!0)],10,De))}}),pe=T(Le,[["__scopeId","data-v-6f7332e1"]]),Te='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"></path></svg>',je='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M896 896H96a32 32 0 0 1-32-32V224a32 32 0 0 1 64 0v608h768a32 32 0 1 1 0 64z"></path><path fill="currentColor" d="M247.008 640a32 32 0 0 1-20.992-56.192l200.992-174.24a32 32 0 0 1 42.272 0.288l172.128 153.44 229.088-246.304a32 32 0 0 1 46.88 43.616l-250.432 269.216a31.936 31.936 0 0 1-44.704 2.08l-174.56-155.52-179.744 155.84a31.872 31.872 0 0 1-20.928 7.776z"></path></svg>',Pe='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z"></path></svg>',Ne='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M821.816 328.808H203.12c-49.072 0-88.192 33.656-88.192 74.6V701.52c0 41.504 39.792 74.6 88.192 74.6h618.688c49.072 0 88.184-33.656 88.184-74.6V403.408c0.008-40.944-39.784-74.6-88.176-74.6z m-1.96 423.496H203.76c-68.36 0-61.888-59.064-61.888-133.152v-131.68c0-73.096-6.472-133.16 61.888-133.16h616.104c68.328 0 61.88 60.064 61.88 133.16v131.688c0 73.064 6.44 133.144-61.888 133.144z"></path><path fill="currentColor" d="M693.784 460.728H329.816c-40.384 0-36.56 27.696-36.56 61.384v60.72c0 34.144-3.824 61.376 36.56 61.376h363.968c40.384 0 36.576-27.688 36.576-61.376v-60.72c0-33.688 3.808-61.384-36.576-61.384z"></path></svg>',Oe='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M853.333333 138.666667H170.666667c-17.066667 0-32 14.933333-32 32v128c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V202.666667h277.333333v618.666666H384c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h256c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32h-96v-618.666666h277.333333V298.666667c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V170.666667c0-17.066667-14.933333-32-32-32z"></path></svg>',We='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z"></path></svg>',Ye=Object.assign({"./svg/图片.svg":Te,"./svg/图表.svg":je,"./svg/圆形.svg":Pe,"./svg/按钮.svg":Ne,"./svg/文本.svg":Oe,"./svg/矩形.svg":We}),Ge={name:String,color:String,size:[String,Number]},Fe=v=>v?Ye[`./svg/${v}.svg`]:"",Xe=["innerHTML"],Ze=A({__name:"Icon",props:Ge,setup(v){const e=v,f=$(()=>Fe(e.name)),a=$(()=>!e.size&&!e.color?{}:{fontSize:typeof e.size=="string"?e.size:`${e.size}px`,"--color":e.color});return(o,c)=>(i(),x("i",{class:"es-icon",style:L(a.value),innerHTML:f.value},null,12,Xe))}}),Je=T(Ze,[["__scopeId","data-v-41413139"]]),Ke={class:"es-layout-aside"},Qe={class:"collapse-content"},et=["onDragstart"],tt={class:"block-text"},lt={class:"collapse-content"},nt=["onDragstart"],ot=A({__name:"Aside",emits:["dragstart","dragend"],setup(v,{emit:e}){const f=e,a=D(["1","2"]);function o(u,r){let _=50,p=50;r.component!=="es-icon"&&(_=r.width||u.target.offsetWidth,p=r.height||u.target.offsetHeight),f("dragstart",{...r,width:_,height:p})}function c(){f("dragend")}return(u,r)=>{const _=m("el-collapse-item"),p=m("el-collapse");return i(),x("div",Ke,[oe(u.$slots,"default",{},()=>[t(p,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=n=>a.value=n)},{default:l(()=>[t(_,{title:"通用",name:"1"},{default:l(()=>[q("div",Qe,[(i(!0),x(H,null,E(d(re).componentList,n=>(i(),x("div",{class:"es-block",draggable:"true",onDragstart:g=>o(g,n),onDragend:c},[t(Je,{name:n.text},null,8,["name"]),q("span",tt,O(n.text),1)],40,et))),256))])]),_:1}),t(_,{title:"图标",name:"2"},{default:l(()=>[q("div",lt,[(i(!0),x(H,null,E(d(re).iconList,n=>(i(),x("div",{class:"es-block",draggable:"true",onDragstart:g=>o(g,n),onDragend:c},[n.component?(i(),I(te(n.component),ne(K({key:0},n.props)),null,16)):(i(),x(H,{key:1},[R(O(n.props.icon),1)],64))],40,nt))),256))])]),_:1})]),_:1},8,["modelValue"])])])}}}),at=A({__name:"EditorStyle",setup(v){const e=W(),f=D(100),a=$({get:()=>{const{width:u,height:r}=e.data.container.style;return`${u} x ${r}`},set:u=>{const[r,_]=u.split(" x ");e.data.container.style.width=+r,e.data.container.style.height=+_}}),o=[{label:"PC",options:[{label:"1360 x 760",value:"1360 x 760"},{label:"1280 x 720",value:"1280 x 720"},{label:"800 x 600",value:"800 x 600"}]},{label:"H5",options:[{label:"360 x 780",value:"360 x 780"},{label:"iPhone 6/7/8",value:"375 x 667"},{label:"iPhone 6/7/8 Plus",value:"414 x 736"}]}],c=u=>{e.data.container.scaleRatio=u/100};return(u,r)=>{const _=m("el-option"),p=m("el-option-group"),n=m("el-select"),g=m("el-form-item"),S=m("el-input"),y=m("el-input-number"),w=m("el-switch"),k=m("el-color-picker"),C=m("el-checkbox"),z=m("el-form");return i(),I(z,{model:d(e).data.container,"label-width":"90px","label-position":"left",style:{padding:"0 10px"}},{default:l(()=>[t(g,{label:"画布尺寸"},{default:l(()=>[t(n,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=s=>a.value=s)},{default:l(()=>[(i(),x(H,null,E(o,s=>t(p,{key:s.label,label:s.label},{default:l(()=>[(i(!0),x(H,null,E(s.options,U=>(i(),I(_,{label:U.label,value:U.value},null,8,["label","value"]))),256))]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"缩放比例(%)"},{default:l(()=>[t(S,{modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=s=>f.value=s),modelModifiers:{number:!0},onChange:c},null,8,["modelValue"])]),_:1}),t(g,{label:"画布宽度"},{default:l(()=>[t(y,{modelValue:d(e).data.container.style.width,"onUpdate:modelValue":r[2]||(r[2]=s=>d(e).data.container.style.width=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"画布高度"},{default:l(()=>[t(y,{modelValue:d(e).data.container.style.height,"onUpdate:modelValue":r[3]||(r[3]=s=>d(e).data.container.style.height=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"网格"},{default:l(()=>[t(w,{modelValue:d(e).data.container.snapToGrid,"onUpdate:modelValue":r[4]||(r[4]=s=>d(e).data.container.snapToGrid=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"网格大小"},{default:l(()=>[t(y,{modelValue:d(e).data.container.gridSize,"onUpdate:modelValue":r[5]||(r[5]=s=>d(e).data.container.gridSize=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"网格颜色"},{default:l(()=>[t(k,{modelValue:d(e).data.container.gridColor,"onUpdate:modelValue":r[6]||(r[6]=s=>d(e).data.container.gridColor=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"背景颜色"},{default:l(()=>[t(k,{modelValue:d(e).data.container.style.backgroundColor,"onUpdate:modelValue":r[7]||(r[7]=s=>d(e).data.container.style.backgroundColor=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"参考线"},{default:l(()=>[t(C,{modelValue:d(e).data.container.markline.show,"onUpdate:modelValue":r[8]||(r[8]=s=>d(e).data.container.markline.show=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}}),J=A({__name:"ColorPicker",setup(v){const e=["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"];return(f,a)=>{const o=m("el-color-picker");return i(),I(o,{"show-alpha":"",predefine:e})}}}),rt={class:"es-input-number"},st={class:"es-input-number-prefix"},ut=A({__name:"InputNumber",props:{prefix:{type:String}},setup(v){return(e,f)=>{const a=m("el-input-number");return i(),x("div",rt,[q("div",st,[oe(e.$slots,"prefix",{},()=>[v.prefix?(i(),x(H,{key:0},[R(O(v.prefix)+":",1)],64)):N("",!0)],!0)]),t(a,K(e.$attrs,{"controls-position":"right"}),null,16)])}}}),G=T(ut,[["__scopeId","data-v-470ca3d5"]]),dt='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M928 896l0 32-832 0 0-32z"></path><path fill="currentColor" d="M672 96m0 32l0 640q0 32-32 32l-256 0q-32 0-32-32l0-640q0-32 32-32l256 0q32 0 32 32Z"></path></svg>',it='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M928 512l0 32-192 0 0-32L928 512z m-640 0l0 32-192 0 0-32 192 0z"></path><path d="M672 128m0 32l0 736q0 32-32 32l-256 0q-32 0-32-32l0-736q0-32 32-32l256 0q32 0 32 32Z"></path></svg>',ct='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M96 128l0-32 832 0 0 32z"></path><path fill="currentColor" d="M352 928m0-32l0-640q0-32 32-32l256 0q32 0 32 32l0 640q0 32-32 32l-256 0q-32 0-32-32Z"></path></svg>',pt='<svg t="1692778133849" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15222" width="16" height="16"><path d="M123.26 411.37a32 32 0 1 1 45.28-45.23l311.34 311.67L479.71 97a32 32 0 0 1 32-32 32 32 0 0 1 32 32l0.17 580.89 311.59-311.76a32 32 0 0 1 45.27 45.24l-366.2 366.39-0.19 0.18-0.94 0.9-0.52 0.44-0.62 0.53-0.1 0.09-0.62 0.47-0.5 0.4c-0.05 0-0.1 0.08-0.16 0.11-0.21 0.16-0.43 0.31-0.65 0.46l-0.46 0.32-0.2 0.14-0.65 0.41-0.48 0.29a1.64 1.64 0 0 1-0.22 0.14l-0.62 0.35-0.52 0.29-0.23 0.13-0.59 0.29-0.6 0.3-0.18 0.09c-0.17 0.09-0.35 0.16-0.53 0.24l-0.71 0.3-0.19 0.08-0.48 0.18c-0.27 0.1-0.54 0.21-0.81 0.3H522.6l-0.42 0.13-0.91 0.3h-0.14l-0.39 0.11-1 0.26h-0.12l-0.38 0.08c-0.34 0.08-0.68 0.16-1 0.22h-0.06l-0.42 0.07-1 0.17h-0.09c-0.17 0-0.34 0-0.51 0.06l-0.94 0.12h-0.95l-0.75 0.05h-3.12l-0.75-0.05H508.84l-0.94-0.12c-0.17 0-0.34 0-0.51-0.06h-0.09l-1-0.17-0.42-0.07h-0.1c-0.34-0.06-0.68-0.14-1-0.22l-0.4-0.08h-0.08l-1-0.26-0.4-0.11h-0.14l-0.89-0.29-0.45-0.14-0.14-0.05c-0.26-0.09-0.53-0.19-0.79-0.3l-0.49-0.18h-0.2l-0.69-0.3-0.55-0.24-0.18-0.09-0.59-0.3-0.6-0.29-0.17-0.09h-0.05l-0.52-0.28-0.64-0.36-0.14-0.09h-0.07l-0.47-0.3c-0.22-0.14-0.45-0.27-0.67-0.42h-0.07l-0.11-0.08-0.47-0.33-0.81-0.49-0.09-0.08-0.53-0.42-0.61-0.47-0.08-0.07c-0.24-0.19-0.47-0.4-0.7-0.6l-0.46-0.4c-0.41-0.37-0.81-0.74-1.19-1.13zM896.68 895H127.32a32 32 0 1 0 0 64h769.36a32 32 0 0 0 0-64z" fill="currentColor" p-id="15223"></path></svg>',vt='<svg t="1692774315617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8893" width="16" height="16"><path fill="currentColor" d="M96 128h832v96H96zM96 576h832v96H96zM224 352h576v96H224zM224 800h576v96H224z" p-id="8894"></path></svg>',_t='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M800 448H704V320c0-106.4-85.6-192-192-192S320 213.6 320 320v128H224c-17.6 0-32 14.4-32 32v384c0 17.6 14.4 32 32 32h576c17.6 0 32-14.4 32-32V480c0-17.6-14.4-32-32-32zM512 736c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m128-288H384V320c0-70.4 57.6-128 128-128s128 57.6 128 128v128z"></path></svg>',ft='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M496 96h32v192h-32V96z m0 640h32v192h-32v-192z"></path><path d="M112 352m32 0l736 0q32 0 32 32l0 256q0 32-32 32l-736 0q-32 0-32-32l0-256q0-32 32-32Z" fill="currentColor"></path></svg>',gt='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M96 96h32v832H96z"></path><path d="M224 352m32 0l640 0q32 0 32 32l0 256q0 32-32 32l-640 0q-32 0-32-32l0-256q0-32 32-32Z" fill="currentColor"></path></svg>',mt='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M896 96h32v832h-32z"></path><path d="M96 352m32 0l640 0q32 0 32 32l0 256q0 32-32 32l-640 0q-32 0-32-32l0-256q0-32 32-32Z" fill="currentColor"></path></svg>',ht='<svg t="1692774266304" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6910" width="16" height="16"><path fill="currentColor" d="M96 128h832v96H96zM96 576h832v96H96zM96 352h576v96H96zM96 800h576v96H96z" p-id="6911"></path></svg>',bt='<svg t="1692778640543" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7435" width="16" height="16"><path fill="currentColor" d="M143.998942-0.011289h64.007055V1024h-64.007055zM815.982714 224.002117h64.007056v575.984478h-64.007056zM591.991886-0.011289h64.007056V1024h-64.007056zM368.001058 224.002117h63.995767v575.984478h-63.995767z" p-id="7436"></path></svg>',yt='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M147.4 187.1 283.7 323.4 322.7 284.3 324.6 282.5 190.4 148.2 329.8 148.2 329.8 90.3 89.5 90.3 89.5 329 147.4 329Z"></path><path fill="currentColor" d="M322.5 739.5 283.4 700.4 281.6 698.5 147.4 832.7 147.4 693.4 89.5 693.4 89.5 933.7 328.1 933.7 328.1 875.8 186.2 875.8Z" p-id="9891"></path><path fill="currentColor" d="M694.2 90.3 694.2 148.2 833.6 148.2 701.2 280.6 699.4 282.5 738.5 321.6 740.3 323.3 876.6 187.1 876.6 329 934.5 329 934.5 90.3Z"></path><path fill="currentColor" d="M876.6 832.8 742.3 698.6 703.2 737.7 701.5 739.5 837.7 875.8 695.8 875.8 695.8 933.7 934.5 933.7 934.5 693.4 876.6 693.4Z"></path><path fill="currentColor" d="M512 291.1c-121.8 0-220.9 99.1-220.9 220.8S390.2 732.8 512 732.8 732.9 633.8 732.9 512 633.8 291.1 512 291.1zM675 512c0 89.9-73.1 163-163 163s-163-73.1-163-163c0-89.9 73.1-163 163-163S675 422.1 675 512z"></path></svg>',wt='<svg t="1692774301684" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7896" width="16" height="16"><path fill="currentColor" d="M96 128h832v96H96zM96 576h832v96H96zM352 352h576v96H352zM352 800h576v96H352z" p-id="7897"></path></svg>',xt='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M929 849a30 30 0 0 1-30-30v-83.137a447.514 447.514 0 0 1-70.921 92.209C722.935 933.225 578.442 975.008 442 953.482a444.917 444.917 0 0 1-241.139-120.591 30 30 0 1 1 37.258-47.01l0.231-0.231A385.175 385.175 0 0 0 442 892.625v-0.006c120.855 22.123 250.206-13.519 343.656-106.975a386.646 386.646 0 0 0 70.6-96.653h-87.247a30 30 0 0 1 0-60H929a30 30 0 0 1 30 30V819a30 30 0 0 1-30 30zM632 342a50 50 0 0 1 50 50v240a50 50 0 0 1-50 50H392a50 50 0 0 1-50-50V392a50 50 0 0 1 50-50h240zM402 607a15 15 0 0 0 15 15h190a15 15 0 0 0 15-15V417a15 15 0 0 0-15-15H417a15 15 0 0 0-15 15v190z m403.005-362.025a29.87 29.87 0 0 1-19.117-6.882l-0.232 0.231A386.5 386.5 0 0 0 689.478 168h-0.011c-145.646-75.182-329.021-51.747-451.117 70.35a386.615 386.615 0 0 0-70.6 96.65H255a30 30 0 0 1 0 60H95a30 30 0 0 1-30-30V205a30 30 0 0 1 60 0v83.129a447.534 447.534 0 0 1 70.923-92.206C317.981 73.866 493.048 37.2 647 85.836v-0.045a444.883 444.883 0 0 1 176.143 105.291 30 30 0 0 1-18.138 53.893z"></path></svg>',Vt='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M742.4 384a51.2 51.2 0 0 1 51.2 51.2v460.8a51.2 51.2 0 0 1-51.2 51.2H153.6a51.2 51.2 0 0 1-51.2-51.2V435.2a51.2 51.2 0 0 1 51.2-51.2z m-25.6 76.8H179.2v409.6h537.6V460.8zM514.7648 71.68l54.3232 54.2976-36.5568 36.5568A473.856 473.856 0 0 1 958.208 477.3376l-72.3968 25.6256A397.056 397.056 0 0 0 538.0096 239.744l31.0784 31.0528-54.3232 54.2976-126.72-126.72 126.72-126.6944z"></path></svg>',Ct='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M870.4 384a51.2 51.2 0 0 1 51.2 51.2v460.8a51.2 51.2 0 0 1-51.2 51.2H281.6a51.2 51.2 0 0 1-51.2-51.2V435.2a51.2 51.2 0 0 1 51.2-51.2h588.8z m-25.6 76.8H307.2v409.6h537.6V460.8zM491.1104 53.5808l90.496 90.496L635.904 198.4 581.632 252.672l-90.5216 90.5216-54.272-54.3232 53.7856-53.8368A397.056 397.056 0 0 0 135.8336 502.272l-72.6016-25.0112A473.856 473.856 0 0 1 487.2448 158.3104l-50.432-50.432 54.2976-54.2976z"></path></svg>',kt='<svg t="1692777879594" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14228" width="16" height="16"><path d="M557.654996 981.669904c-6.499999 59.041994-88.986991 53.776995-92.179991 0-0.083-40.896996-0.083-641.390937-0.083-641.390937l-283.839972 273.963973c-44.472996 38.308996-97.43499-22.922998-64.344994-63.215994 125.709988-121.895988 351.289966-340.004967 356.507965-345.049966 20.810998-22.608998 53.572995-23.779998 75.721993 0 41.406996 40.037996 348.700966 336.328967 358.028965 346.989966 31.166997 38.741996-19.223998 96.073991-62.242994 63.773994C834.109969 607.310941 557.739996 340.267967 557.739996 340.267967M116.396039 3.332l786.487923 0 0 89.285991L116.396039 92.617991 116.396039 3.332z" fill="currentColor" p-id="14229"></path></svg>',zt=Object.assign({"./svg/align-bottom.svg":dt,"./svg/align-center.svg":it,"./svg/align-top.svg":ct,"./svg/bottom.svg":pt,"./svg/center.svg":vt,"./svg/disabled.svg":_t,"./svg/justify-center.svg":ft,"./svg/justify-left.svg":gt,"./svg/justify-right.svg":mt,"./svg/left.svg":ht,"./svg/middle.svg":bt,"./svg/resizable.svg":yt,"./svg/right.svg":wt,"./svg/rotatable.svg":xt,"./svg/rotate-left.svg":Vt,"./svg/rotate-right.svg":Ct,"./svg/top.svg":kt}),St={name:String,color:String,size:[String,Number]},Mt=v=>v?zt[`./svg/${v}.svg`]:"",$t=["innerHTML"],Ht=A({__name:"SvgIcon",props:St,setup(v){const e=v,f=$(()=>Mt(e.name)),a=$(()=>!e.size&&!e.color?{}:{fontSize:typeof e.size=="string"?e.size:`${e.size}px`,"--color":e.color});return(o,c)=>(i(),x("i",{class:"es-icon",style:L(a.value),innerHTML:f.value},null,12,$t))}}),Z=T(Ht,[["__scopeId","data-v-7e89263e"]]),Ut=A({__name:"TextStyle",setup(v){const e=W(),f=[{label:"正常",value:"normal"},{label:"标题 1",value:"2em"},{label:"标题 2",value:"1.5em"},{label:"标题 3",value:"1.17em"},{label:"标题 4",value:"1em"},{label:"标题 5",value:"0.9em"},{label:"标题 6",value:"0.8em"}],a=D(""),o=[{label:"加粗",icon:"B",key:"fontWeight",value:"bold"},{label:"斜体",icon:"I",key:"fontStyle",value:"italic"},{label:"下划线",icon:"U",key:"textDecoration",value:"underline"},{label:"中划线",icon:"S",key:"textDecoration",value:"line-through"},{label:"左对齐",icon:"left",key:"justifyContent",value:"flex-start"},{label:"水平居中",icon:"center",key:"justifyContent",value:"center"},{label:"右对齐",icon:"right",key:"justifyContent",value:"flex-end"},{label:"上对齐",icon:"top",key:"alignItems",value:"flex-start"},{label:"垂直居中",icon:"middle",key:"alignItems",value:"center"},{label:"下对齐",icon:"bottom",key:"alignItems",value:"flex-end"}],c=$(()=>[...o].map(y=>({...y,selected:S(y.key)===y.value}))),u=$(()=>[c.value.slice(0,4),c.value.slice(4,7),c.value.slice(7,10)]),r=[{label:"Helvetica"},{label:"PingFang SC"},{label:"Hiragino Sans GB"},{label:"Microsoft YaHei"},{label:"Times New Roman"},{label:"Verdana"},{label:"Courier New"},{label:"Georgia"},{label:"Lucida Sans"},{label:"Tahoma"}];function _(y){y.selected=!y.selected,g(y.key,y.selected?y.value:void 0)}function p(y){const w=y==="normal";e.current.style.fontSize=w?void 0:y,e.current.style.fontWeight=w?"normal":"bold"}const n=$({get:()=>e.current.style||{},set:y=>{e.current.style=e.current.style||{},Object.keys(y).forEach(w=>{g(w,y[w])})}});function g(y,w){e.current.style[y]=w}function S(y){return e.current.style[y]}return(y,w)=>{const k=m("el-button"),C=m("el-tooltip"),z=m("el-button-group"),s=m("el-row"),U=m("el-divider"),h=m("el-col"),M=m("el-option"),Y=m("el-select"),j=m("el-input");return i(),x("div",null,[(i(!0),x(H,null,E(u.value,(b,B)=>(i(),I(s,null,{default:l(()=>[t(z,{style:{display:"inline-flex"}},{default:l(()=>[(i(!0),x(H,null,E(b,V=>(i(),I(C,{placement:"top","show-after":300,content:V.label},{default:l(()=>[t(k,{type:V.selected?"primary":"",style:L([{flex:"1"},B===0?{[V.key]:V.value}:{}]),onClick:P=>_(V)},{default:l(()=>[B===0?(i(),x(H,{key:0},[R(O(V.icon),1)],64)):(i(),I(Z,{key:1,name:V.icon,size:20},null,8,["name"]))]),_:2},1032,["type","style","onClick"])]),_:2},1032,["content"]))),256))]),_:2},1024)]),_:2},1024))),256)),t(U),t(s,{gutter:10},{default:l(()=>[t(h,{span:10},{default:l(()=>[R("字体颜色:")]),_:1}),t(h,{span:14},{default:l(()=>[t(J,{modelValue:n.value.color,"onUpdate:modelValue":w[0]||(w[0]=b=>n.value.color=b)},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{gutter:10},{default:l(()=>[t(h,{span:10},{default:l(()=>[R("标题:")]),_:1}),t(h,{span:14},{default:l(()=>[t(Y,{modelValue:a.value,"onUpdate:modelValue":w[1]||(w[1]=b=>a.value=b),placeholder:"标题",onChange:p},{default:l(()=>[(i(),x(H,null,E(f,b=>t(M,{label:b.label,value:b.value},{default:l(()=>[q("span",{style:L({fontSize:b.value,fontWeight:"bold"})},O(b.label),5)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(s,{gutter:10},{default:l(()=>[t(h,{span:10},{default:l(()=>[R("字体:")]),_:1}),t(h,{span:14},{default:l(()=>[t(Y,{modelValue:n.value.fontFamily,"onUpdate:modelValue":w[2]||(w[2]=b=>n.value.fontFamily=b),placeholder:"字体"},{default:l(()=>[(i(),x(H,null,E(r,b=>t(M,{label:b.label,value:b.label},{default:l(()=>[q("span",{style:L({fontFamily:b.label})},O(b.label),5)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(s,{gutter:10},{default:l(()=>[t(h,{span:10},{default:l(()=>[R("字体大小:")]),_:1}),t(h,{span:14},{default:l(()=>[t(j,{modelValue:n.value.fontSize,"onUpdate:modelValue":w[3]||(w[3]=b=>n.value.fontSize=b)},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{gutter:10},{default:l(()=>[t(h,{span:10},{default:l(()=>[R("行高:")]),_:1}),t(h,{span:14},{default:l(()=>[t(G,{modelValue:n.value.lineHeight,"onUpdate:modelValue":w[4]||(w[4]=b=>n.value.lineHeight=b)},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{gutter:10},{default:l(()=>[t(h,{span:10},{default:l(()=>[R("文本:")]),_:1}),t(h,{span:14},{default:l(()=>[t(j,{type:"textarea",modelValue:d(e).current.text,"onUpdate:modelValue":w[5]||(w[5]=b=>d(e).current.text=b)},null,8,["modelValue"])]),_:1})]),_:1})])}}}),Rt=T(Ut,[["__scopeId","data-v-b9fe192e"]]),It=A({__name:"Background",props:{modelValue:{type:String}},emits:["update:modelValue"],setup(v,{emit:e}){const f=v,a=e,o=$({get:()=>f.modelValue,set:w=>{a("update:modelValue",w)}}),c=[{label:"纯色背景",value:1},{label:"渐变背景",value:2}],u=D(c[0].value),r=[{label:"线性渐变",value:"linear"},{label:"径向渐变",value:"radial"}],_=D(r[0].value),p=$({get:()=>S("startColor"),set:w=>{y(g.value,w,n.value)}}),n=$({get:()=>S("endColor"),set:w=>{y(g.value,p.value,w)}}),g=$({get:()=>S("gradientRotate"),set:w=>{y(w,p.value,n.value)}});function S(w){const k=o.value||"";let C=/gradient\((\d+deg),\s*(rgba?\([^)]+\)),\s*(rgba?\([^)]+\))\)/;_.value==="radial"&&(C=/(gradient)\(.*(rgba?\([^)]+\)),\s*(rgba?\([^)]+\))\)/);const s=k.match(C),U=w==="gradientRotate"?90:"rgba(255, 255, 255, 1)";return s?w==="startColor"?s[2]||U:w==="endColor"?s[3]||U:w==="gradientRotate"&&parseInt(s[1])||U:U}function y(w,k,C){let z=`linear-gradient(${w}deg, ${k}, ${C})`;_.value==="radial"&&(z=`radial-gradient(${k}, ${C})`),a("update:modelValue",z)}return(w,k)=>{const C=m("el-option"),z=m("el-select"),s=m("el-col"),U=m("el-row"),h=m("el-slider");return i(),x(H,null,[t(U,{gutter:10},{default:l(()=>[t(s,{span:12},{default:l(()=>[t(z,{modelValue:u.value,"onUpdate:modelValue":k[0]||(k[0]=M=>u.value=M)},{default:l(()=>[(i(),x(H,null,E(c,M=>t(C,ne(se(M)),null,16)),64))]),_:1},8,["modelValue"])]),_:1}),t(s,{span:12},{default:l(()=>[u.value===1?(i(),I(J,{key:0,modelValue:o.value,"onUpdate:modelValue":k[1]||(k[1]=M=>o.value=M)},null,8,["modelValue"])):(i(),I(z,{key:1,modelValue:_.value,"onUpdate:modelValue":k[2]||(k[2]=M=>_.value=M),onChange:k[3]||(k[3]=M=>y(g.value,p.value,n.value))},{default:l(()=>[(i(),x(H,null,E(r,M=>t(C,ne(se(M)),null,16)),64))]),_:1},8,["modelValue"]))]),_:1})]),_:1}),u.value===2?(i(),x(H,{key:0},[t(U,{gutter:10},{default:l(()=>[t(s,{span:12},{default:l(()=>[R(" 起点颜色: ")]),_:1}),t(s,{span:12},{default:l(()=>[t(J,{modelValue:p.value,"onUpdate:modelValue":k[4]||(k[4]=M=>p.value=M)},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{gutter:10},{default:l(()=>[t(s,{span:12},{default:l(()=>[R(" 终点颜色: ")]),_:1}),t(s,{span:12},{default:l(()=>[t(J,{modelValue:n.value,"onUpdate:modelValue":k[5]||(k[5]=M=>n.value=M)},null,8,["modelValue"])]),_:1})]),_:1}),_.value==="linear"?(i(),I(U,{key:0,gutter:10},{default:l(()=>[t(s,{span:12},{default:l(()=>[R(" 渐变角度: ")]),_:1}),t(s,{span:12},{default:l(()=>[t(h,{size:"small",modelValue:g.value,"onUpdate:modelValue":k[6]||(k[6]=M=>g.value=M),max:360},null,8,["modelValue"])]),_:1})]),_:1})):N("",!0)],64)):N("",!0)],64)}}}),Bt={key:0},Et=A({__name:"Border",setup(v){const e=W(),f=[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"点线",value:"dotted"}],a=$({get:()=>e.current.style.borderStyle||"solid",set:o=>{e.current.style.borderStyle=o}});return(o,c)=>{const u=m("el-col"),r=m("el-row"),_=m("el-option"),p=m("el-select");return d(e).current.style?(i(),x("div",Bt,[t(r,{gutter:10},{default:l(()=>[t(u,{span:10},{default:l(()=>[R("边框颜色:")]),_:1}),t(u,{span:14},{default:l(()=>[t(J,{modelValue:d(e).current.style.borderColor,"onUpdate:modelValue":c[0]||(c[0]=n=>d(e).current.style.borderColor=n)},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{gutter:10},{default:l(()=>[t(u,{span:10},{default:l(()=>[R("边框宽度:")]),_:1}),t(u,{span:14},{default:l(()=>[t(G,{modelValue:d(e).current.style.borderWidth,"onUpdate:modelValue":c[1]||(c[1]=n=>d(e).current.style.borderWidth=n)},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{gutter:10},{default:l(()=>[t(u,{span:10},{default:l(()=>[R("边框风格:")]),_:1}),t(u,{span:14},{default:l(()=>[t(p,{modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=n=>a.value=n)},{default:l(()=>[(i(),x(H,null,E(f,n=>t(_,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{gutter:10},{default:l(()=>[t(u,{span:10},{default:l(()=>[R("边框半径:")]),_:1}),t(u,{span:14},{default:l(()=>[t(G,{modelValue:d(e).current.style.borderRadius,"onUpdate:modelValue":c[3]||(c[3]=n=>d(e).current.style.borderRadius=n)},null,8,["modelValue"])]),_:1})]),_:1})])):N("",!0)}}}),qt=v=>(ve("data-v-beb9db8f"),v=v(),_e(),v),At={class:"color-list"},Dt=["onClick"],Lt=qt(()=>q("div",{style:{"margin-bottom":"10px"}},"文本: ",-1)),Tt=A({__name:"ElementStyle",setup(v){const e=W(),f=D([{backgroundColor:"#ff4500"},{backgroundColor:"#ff8c00"},{backgroundColor:"#ffd700"},{backgroundColor:"#90ee90"},{backgroundColor:"#00ced1"},{backgroundColor:"#1e90ff"},{backgroundColor:"#c71585"},{backgroundColor:"rgba(255, 69, 0, 0.68)"}]),a=$({get:()=>e.current.style.background||e.current.style.backgroundColor,set:u=>{e.current.style.background=u}}),o=u=>{e.current.selected&&(e.current.style={...e.current.style,...u})};function c(u,r){e.current.style[u]=r}return(u,r)=>{const _=m("el-divider"),p=m("el-col"),n=m("el-slider"),g=m("el-row"),S=m("el-form");return d(e).current&&d(e).current.selected?(i(),I(S,{key:0,model:d(e).current,"label-width":"80px","label-position":"left"},{default:l(()=>[q("div",At,[(i(!0),x(H,null,E(f.value,y=>(i(),x("div",{class:"color-item",style:L(y),onClick:w=>o(y)},null,12,Dt))),256))]),t(_),d(e).current.style?(i(),x(H,{key:0},[t(It,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=y=>a.value=y)},null,8,["modelValue"]),t(_),t(g,{gutter:10},{default:l(()=>[t(p,{span:10},{default:l(()=>[R("透明度:")]),_:1}),t(p,{span:14,style:{padding:"0 15px",width:"100%"}},{default:l(()=>[t(n,{modelValue:1,step:.01,min:0,max:1,size:"small",onInput:r[1]||(r[1]=y=>c("opacity",y))})]),_:1})]),_:1}),t(_),t(Et)],64)):N("",!0),t(_),Lt,t(Rt)]),_:1},8,["model"])):N("",!0)}}}),jt=T(Tt,[["__scopeId","data-v-beb9db8f"]]),Pt=A({__name:"Position",setup(v){const e=W(),f=[{label:"左对齐",value:"justify-left"},{label:"水平居中",value:"justify-center"},{label:"右对齐",value:"justify-right"}],a=[{label:"上对齐",value:"align-top"},{label:"垂直居中",value:"align-center"},{label:"下对齐",value:"align-bottom"}],o=D(["resizable","rotatable"]),c=[{label:"禁用",value:"disabled"},{label:"可缩放",value:"resizable"},{label:"可旋转",value:"rotatable"}];function u(p){e.current.angle=(e.current.angle||0)+p}function r(p){c.map(g=>g.value).forEach(g=>{p.includes(g)?e.current[g]=!0:e.current[g]=!1})}function _(p){const{width:n,height:g}=e.data.container.style;switch(p){case"justify-left":e.current.left=0;break;case"justify-center":e.current.left=n/2-e.current.width/2;break;case"justify-right":e.current.left=n-e.current.width;break;case"align-top":e.current.top=0;break;case"align-center":e.current.top=g/2-e.current.height/2;break;case"align-bottom":e.current.top=g-e.current.height;break}}return(p,n)=>{const g=m("el-col"),S=m("el-row"),y=m("el-divider"),w=m("el-button"),k=m("el-tooltip"),C=m("el-button-group"),z=m("el-checkbox-button"),s=m("el-checkbox-group"),U=m("el-form");return d(e).current&&d(e).current.selected?(i(),I(U,{key:0,model:d(e).current,"label-width":"80px","label-position":"left"},{default:l(()=>[t(S,{gutter:10},{default:l(()=>[t(g,{span:12},{default:l(()=>[t(G,{modelValue:d(e).current.left,"onUpdate:modelValue":n[0]||(n[0]=h=>d(e).current.left=h),prefix:"X"},null,8,["modelValue"])]),_:1}),t(g,{span:12},{default:l(()=>[t(G,{modelValue:d(e).current.top,"onUpdate:modelValue":n[1]||(n[1]=h=>d(e).current.top=h),prefix:"Y"},null,8,["modelValue"])]),_:1})]),_:1}),t(S,{gutter:10},{default:l(()=>[t(g,{span:12},{default:l(()=>[t(G,{modelValue:d(e).current.width,"onUpdate:modelValue":n[2]||(n[2]=h=>d(e).current.width=h),prefix:"W"},null,8,["modelValue"])]),_:1}),t(g,{span:12},{default:l(()=>[t(G,{modelValue:d(e).current.height,"onUpdate:modelValue":n[3]||(n[3]=h=>d(e).current.height=h),prefix:"H"},null,8,["modelValue"])]),_:1})]),_:1}),t(S,{gutter:10},{default:l(()=>[t(g,{span:12},{default:l(()=>[t(G,{modelValue:d(e).current.angle,"onUpdate:modelValue":n[4]||(n[4]=h=>d(e).current.angle=h),prefix:"旋转"},null,8,["modelValue"])]),_:1}),t(g,{span:12,class:"es-col"},{default:l(()=>[q("div",{class:"text-btn",onClick:n[5]||(n[5]=h=>u(-45))},[t(Z,{name:"rotate-left"}),R(" -45°")]),q("div",{class:"text-btn",onClick:n[6]||(n[6]=h=>u(45))},[t(Z,{name:"rotate-right"}),R(" +45°")])]),_:1})]),_:1}),t(y),t(S,null,{default:l(()=>[t(C,{style:{display:"inline-flex"}},{default:l(()=>[(i(),x(H,null,E(f,h=>t(k,{placement:"top","show-after":300,content:h.label},{default:l(()=>[t(w,{style:{flex:"1"},onClick:M=>_(h.value)},{default:l(()=>[t(Z,{name:h.value,size:20},null,8,["name"])]),_:2},1032,["onClick"])]),_:2},1032,["content"])),64))]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(C,{style:{display:"inline-flex"}},{default:l(()=>[(i(),x(H,null,E(a,h=>t(k,{placement:"top","show-after":300,content:h.label},{default:l(()=>[t(w,{style:{flex:"1"},onClick:M=>_(h.value)},{default:l(()=>[t(Z,{name:h.value,size:20},null,8,["name"])]),_:2},1032,["onClick"])]),_:2},1032,["content"])),64))]),_:1})]),_:1}),t(y),t(S,null,{default:l(()=>[t(s,{modelValue:o.value,"onUpdate:modelValue":n[7]||(n[7]=h=>o.value=h),size:"small",onChange:r},{default:l(()=>[(i(),x(H,null,E(c,h=>t(k,{placement:"top","show-after":300,content:h.label},{default:l(()=>[t(z,{style:{flex:"1"},label:h.value,value:h.value},{default:l(()=>[t(Z,{name:h.value,size:20},null,8,["name"])]),_:2},1032,["label","value"])]),_:2},1032,["content"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])):N("",!0)}}}),Nt=T(Pt,[["__scopeId","data-v-85de5007"]]),Ot={};function Wt(v,e){return i(),x("div",null," 动画 ")}const Yt=T(Ot,[["render",Wt]]),Gt={class:"es-layout-info"},Ft={class:"es-info-tabs"},Xt=["onClick"],Zt=A({__name:"Info",setup(v){const e=W(),f={样式:jt,位置:Nt,动画:Yt,画布属性:at},a=["样式","位置","动画"],o=["画布属性"],c=D("画布属性"),u=$(()=>e.current&&e.current.selected?a:o),r=$(()=>f[c.value]);return Q(()=>e.current.selected,()=>{c.value=e.current.selected?a[0]:o[0]},{immediate:!0}),(_,p)=>(i(),x("div",Gt,[q("div",Ft,[(i(!0),x(H,null,E(u.value,n=>(i(),x("div",{class:ce(["es-info-tab",{active:n===c.value}]),onClick:g=>c.value=n},O(n),11,Xt))),256))]),q("div",{class:"es-info-style",onClick:p[0]||(p[0]=X(()=>{},["stop"]))},[(i(),I(te(r.value)))])]))}});function Jt(v){const e={current:-1,queue:[],commands:{},commandArray:[],destoryArray:[]},f=o=>{e.commandArray.push(o),e.commands[o.name]=(...c)=>{const{redo:u,undo:r}=o.execute(...c);if(u&&u(),o.pushQueue){let{queue:_}=e;_.length>0&&(_=_.slice(0,e.current+1),e.queue=_),e.queue.push({redo:u,undo:r}),e.current+=1}}};f({name:"redo",keyboard:"ctrl+y",execute(){return{redo(){let o=e.queue[e.current+1];o&&(o.redo&&o.redo(),e.current++)}}}}),f({name:"undo",keyboard:"ctrl+z",execute(){return{redo(){if(e.current===-1)return;let o=e.queue[e.current];o&&(o.undo&&o.undo(),e.current--)}}}}),f({name:"drag",pushQueue:!0,init(){const o=()=>{this.before=He(v.data.elements)},c=()=>e.commands.drag();return F.on("dragstart",o),F.on("dragend",c),()=>{F.off("dragstart",o),F.off("dragend",c)}},execute(){const o=this.before,c=v.data.elements;return{redo(){v.data={...v.data,elements:c}},undo(){v.data={...v.data,elements:o}}}}}),f({name:"updateContainer",pushQueue:!0,execute(o){const c={before:v.data,after:o};return{redo(){v.data=c.after},undo(){v.data=c.before}}}}),e.commandArray.forEach(o=>{o.init&&e.destoryArray.push(o.init())});const a=()=>{const o=c=>{const{ctrlKey:u,key:r}=c,_=[];u&&_.push("ctrl"),_.push(r);const p=_.join("+");e.commandArray.forEach(({name:n,keyboard:g})=>{g&&g===p&&(e.commands[n](),c.preventDefault())})};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}};return le(()=>{e.destoryArray.push(a())}),fe(()=>{e.destoryArray.forEach(o=>o&&o())}),e}const Kt=A({__name:"index",props:{modelValue:{type:Object,required:!0,default:()=>({})},commands:{type:Object}},setup(v){const e=W(),f=v,a=D(null),o=$({get:()=>f.modelValue,set:()=>{}}),c=$(()=>{var b;return((b=f.modelValue.container)==null?void 0:b.gridSize)||10}),u=$(()=>{var b;return((b=f.modelValue.container)==null?void 0:b.scaleRatio)||1}),r=$(()=>{const{width:b,height:B}=o.value.container.style;return{...o.value.container.style,width:b+"px",height:B+"px",transform:`scale(${u.value})`,transformOrigin:"top left"}}),_=D({startX:0,startY:0,disX:0,disY:0}),p=$({get:()=>e.current,set:b=>{e.current=b}}),n=D(),{areaSelected:g,onEditorMouseDown:S,onAreaMove:y,onAreaUp:w}=Re(o,n),{editorRect:k,onContextmenu:C,onEditorContextMenu:z}=Be(o,a);function s(b){p.value=b,g.value||o.value.elements.filter(V=>V.selected).length===1&&o.value.elements.forEach(V=>V.selected=!1),p.value.selected=!0,_.value.startX=p.value.left,_.value.startY=p.value.top,F.emit("dragstart")}function U(){F.emit("dragend")}function h(b){const B=b.left-_.value.startX,V=b.top-_.value.startY;o.value.elements.forEach(P=>{var ae;P.selected&&((ae=p.value)==null?void 0:ae.id)!==P.id&&(P.left+=B,P.top+=V)}),_.value.startX=b.left,_.value.startY=b.top}function M(b,B){Object.keys(b).forEach(V=>{B[V]=b[V]})}const Y={dblclick:()=>{!p.value||!p.value.selected||(p.value.editable=!0)},click:()=>{p.value&&(p.value.editable=!1)}};function j(b="on"){["dblclick","click"].forEach(V=>{b==="on"?document.addEventListener(V,Y[V]):document.removeEventListener(V,Y[V])})}return le(()=>{j()}),ge(()=>{j("off")}),(b,B)=>(i(),x("div",{ref_key:"editorRef",ref:a,class:"es-editor",style:L(r.value),onMousedown:B[2]||(B[2]=(...V)=>d(S)&&d(S)(...V)),onContextmenu:B[3]||(B[3]=X((...V)=>d(z)&&d(z)(...V),["prevent"]))},[(i(!0),x(H,null,E(o.value.elements,V=>(i(),I(d(me),K({rotatable:""},d(Ae)(V,["style","props"]),{"grid-x":c.value,"grid-y":c.value,scaleRatio:u.value,boundary:"",markline:"",snap:"","snap-threshold":o.value.container.gridSize,onDragStart:P=>s(V),onDragEnd:U,onDrag:h,onChange:P=>M(P,V),onContextmenu:X(P=>d(C)(P,V),["stop"]),onMousedown:B[0]||(B[0]=X(()=>{},["stop"])),onClick:B[1]||(B[1]=X(()=>{},["stop"]))}),{default:l(()=>[(i(),I(te(V.component),K({element:V},V.props,{style:{...d(ee)(V.style,!1),width:"100%",height:"100%"}}),{default:l(()=>[V.text?(i(),I(pe,{key:0,editable:V.editable,text:V.text,style:L(d(ee)(V.style))},null,8,["editable","text","style"])):N("",!0)]),_:2},1040,["element","style"]))]),_:2},1040,["grid-x","grid-y","scaleRatio","snap-threshold","onDragStart","onChange","onContextmenu"]))),256)),o.value.container.snapToGrid?(i(),I(Ue,{key:0,grid:o.value.container.gridSize,"border-color":o.value.container.gridColor},null,8,["grid","border-color"])):N("",!0),t(Ie,{ref_key:"areaRef",ref:n,onMove:d(y),onUp:d(w)},null,8,["onMove","onUp"])],36))}}),Qt=T(Kt,[["__scopeId","data-v-9e83b2c6"]]),el={class:"es-preview-tools"},tl=A({__name:"Preview",setup(v){const e=W(),f=D(),a=$(()=>{const{width:u,height:r}=e.data.container.style;return{...e.data.container.style,width:u+"px",height:r+"px",transform:`scale(${o.value})`,transformOrigin:"top left"}}),o=$(()=>{var u;return((u=e.data.container)==null?void 0:u.scaleRatio)||1});function c(u){const{width:r,height:_}=e.data.container.style,p=he().format("YYYY-MM-DD")+"-es-drager-editor."+u;be(f.value).then(n=>{if(u==="pdf"){const g=new ye("l","pt","a4"),S=n.toDataURL();return g.addImage(S,"PNG",0,0,+r,+_),g.save(p)}n.toBlob(g=>{const S=document.createElement("a");S.download=p;const y=URL.createObjectURL(g);S.href=y,S.click(),URL.revokeObjectURL(y)})})}return(u,r)=>{const _=m("el-button"),p=m("el-dialog");return i(),I(p,{draggable:"",fullscreen:""},{default:l(()=>[q("div",el,[t(_,{type:"primary",onClick:r[0]||(r[0]=n=>c("png"))},{default:l(()=>[R("导出PNG")]),_:1}),t(_,{type:"primary",onClick:r[1]||(r[1]=n=>c("jpg"))},{default:l(()=>[R("导出JPG")]),_:1}),t(_,{type:"primary",onClick:r[2]||(r[2]=n=>c("pdf"))},{default:l(()=>[R("导出PDF")]),_:1})]),q("div",{class:"es-preview-body",style:L({width:a.value.width,height:a.value.height})},[q("div",{ref_key:"editorRef",ref:f,class:"es-editor preview",style:L(a.value)},[(i(!0),x(H,null,E(d(e).data.elements,n=>(i(),I(te(n.component),K(n.props,{style:{...d(ee)(n.style,!1),width:n.width+"px",height:n.height+"px",position:"absolute",left:n.left+"px",top:n.top+"px"}}),{default:l(()=>[n.text?(i(),I(pe,{key:0,text:n.text,style:L(d(ee)(n.style))},null,8,["text","style"])):N("",!0)]),_:2},1040,["style"]))),256))],4)],4)]),_:1})}}}),ll=T(tl,[["__scopeId","data-v-294a182a"]]),nl={class:"es-layout-container"},ol=A({__name:"index",props:{data:{type:Object,required:!0},theme:{type:String}},setup(v,{expose:e}){const f=v,a=W(),o=D(),{commands:c}=Jt(a),u=[{label:"撤销",icon:we,handler:c.undo},{label:"重做",icon:xe,handler:c.redo},{label:"导出",icon:Ve,handler:()=>{Ee({title:"导出",content:JSON.stringify(a.data),confirm(C){c.updateContainer(JSON.parse(C))}})}},{label:"导入",icon:Ce,handler:()=>{de({resultType:"json",onChange(C){c.updateContainer(JSON.parse(C))}})}},{label:"插入图片",icon:ke,handler:()=>{de({resultType:"image",onChange(C){const s={id:ue(),component:"img",props:{src:C,width:200,onLoadOnce(U){if(s.props.loaded)return;const{naturalHeight:h,naturalWidth:M}=U.target,Y=a.data.elements.find(b=>b.id===s.id);let j=200/M;j>1&&(j=1),Y.width=M*j,Y.height=h*j,s.props.loaded=!0}}};a.data.elements.push(s)}})}},{label:"预览",icon:ze,handler:()=>a.preview=!0}],r=$(()=>{const{width:C,height:z}=a.data.container.style,s={},U=a.initWidth>+C,h=a.initHeight>+z;return U&&(s.position="absolute",s.left="50%",s.transform="translateX(-50%)"),h&&(s.position="absolute",s.top="50%",s.transform="translateY(-50%)"),U&&h&&(s.transform="translate(-50%, -50%)"),s}),_=$(()=>{var C;return((C=o.value)==null?void 0:C.getBoundingClientRect())||{}});let p=null;function n(C){F.emit("dragstart"),p=C}function g(){F.emit("dragend")}function S(C){C.dataTransfer.dropEffect="move"}function y(C){if(!p)return;const z=p.component==="es-icon",s=[...a.data.elements,{...p,equalProportion:z,left:C.offsetX-p.width/2,top:C.offsetY-p.height/2,id:ue(),style:p.style||{}}];a.data.elements=s,p=null}function w(){a.initWidth=Math.floor(_.value.width),a.initHeight=Math.floor(_.value.height-7),a.data.container.style.width=a.initWidth,a.data.container.style.height=a.initHeight}function k(){return{...a.data}}return Q(()=>f.data,()=>{a.update(f.data)},{immediate:!0}),Q(()=>f.theme,()=>{f.theme&&(a.theme=f.theme)},{immediate:!0}),le(()=>{w()}),e({tools:u,getData:k}),(C,z)=>(i(),x(H,null,[q("div",nl,[t(ot,{onDragstart:n,onDragend:g}),q("div",{ref_key:"mainRef",ref:o,class:"es-layout-main"},[q("div",{class:"es-editor-container",style:L(r.value)},[t(Qt,{modelValue:d(a).data,"onUpdate:modelValue":z[0]||(z[0]=s=>d(a).data=s),commands:d(c),onDragenter:S,onDrop:y,onDragover:z[1]||(z[1]=X(()=>{},["prevent"]))},null,8,["modelValue","commands"])],4)],512),t(Zt,{modelValue:d(a).current,"onUpdate:modelValue":z[2]||(z[2]=s=>d(a).current=s)},null,8,["modelValue"])]),t(ll,{modelValue:d(a).preview,"onUpdate:modelValue":z[3]||(z[3]=s=>d(a).preview=s)},null,8,["modelValue"])],64))}}),al={class:"es-header-toolbar"},rl=["onClick"],sl="ES Drager Editor 开发中...",ul=A({__name:"index",setup(v){const e=D(null),f=Se(),a=D({container:{markline:{show:!0,color:""},snapToGrid:!0,gridSize:10,gridColor:"",style:{},scaleRatio:1},elements:[{id:"1",component:"div",width:100,height:100,left:100,top:100,text:"div1",style:{background:"#ff4500",color:"#fff"}},{id:"2",component:"div",width:100,height:100,left:300,top:150,text:"div2",style:{background:"#00ced1",color:"#fff"}}]}),o=$(()=>{var u;return((u=e.value)==null?void 0:u.tools)||[]});function c(u){typeof u.handler=="function"&&u.handler()}return le(()=>{console.log(e.value)}),(u,r)=>{const _=m("el-button");return i(),x("div",{class:"es-layout",onClick:r[0]||(r[0]=X(()=>{},["stop"]))},[t(Me,{title:sl},{default:l(()=>[q("div",al,[(i(!0),x(H,null,E(o.value,p=>(i(),x("div",{class:"es-tool-btn",onClick:n=>c(p)},[t(_,{icon:p.icon},{default:l(()=>[R(O(p.label),1)]),_:2},1032,["icon"])],8,rl))),256))])]),_:1}),t(d(ol),{ref_key:"editorRef",ref:e,data:a.value,theme:d(f).theme},null,8,["data","theme"])])}}});const vl=T(ul,[["__scopeId","data-v-9117bc43"]]);export{vl as default};
