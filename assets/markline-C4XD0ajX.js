import{d as j,r as g,z as q,c as w,o as c,i as a,a as d,w as i,u as s,A as F,j as C,F as G,b as J,B as x,y as L,f as u,t as f,h as B,e as S,C as K,m as R,_ as A}from"./index-CM2PV9If.js";import{G as I}from"./GridRect-BV8reFoY.js";import{_ as D}from"./index-Be__8c-E.js";const M={class:"es-container"},P={class:"es-tools"},T={class:"es-editor"},U=j({__name:"markline",setup($){const r=g({left:null,top:null}),v=g({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),p=b(v);function E(){p.record()}function N(n,t){Object.keys(n).forEach(e=>{t[e]=n[e]})}function b(n){const t=[];let e=-1;const o=()=>{console.log("redo",e,t),e<t.length-1&&(e++,n.value.componentList=m(t[e]))},l=()=>{console.log("undo",e,t),e>=0&&(e--,t[e]&&(n.value.componentList=m(t[e])))},h=()=>{t[++e]=m(n.value.componentList)};h();const k=O=>{const{ctrlKey:V,key:y}=O;V&&(y==="z"?l():y==="y"&&o())};return window.addEventListener("keydown",k),q(()=>{window.removeEventListener("keydown",k)}),{redo:o,undo:l,record:h}}function m(n){return JSON.parse(JSON.stringify(n))}function z(n){r.value=n}function _(n){return[document.querySelector(".editor-center")]}return(n,t)=>{const e=F("el-button");return c(),w("div",M,[a("div",P,[d(e,{type:"primary",onClick:s(p).undo},{default:i(()=>[u(f(s(B)("examples.undo")),1)]),_:1},8,["onClick"]),d(e,{type:"primary",onClick:s(p).redo},{default:i(()=>[u(f(s(B)("examples.redo")),1)]),_:1},8,["onClick"])]),a("div",T,[(c(!0),w(G,null,J(v.value.componentList,o=>(c(),S(s(D),R({ref_for:!0},o,{snap:"","snap-threshold":10,markline:"",extraLines:_,onChange:l=>N(l,o),onDragEnd:E}),{default:i(()=>[(c(),S(K(o.component),null,{default:i(()=>[u(f(o.text),1)]),_:2},1024))]),_:2},1040,["onChange"]))),256)),d(s(D),{width:100,height:100,left:200,top:200,snap:"",markline:z,extraLines:_},{default:i(()=>[...t[0]||(t[0]=[u(" custom markline ",-1)])]),_:1}),C(a("div",{class:"es-editor-markline-left",style:L({left:r.value.left+"px"})},null,4),[[x,r.value.left]]),C(a("div",{class:"es-editor-markline-top",style:L({top:r.value.top+"px"})},null,4),[[x,r.value.top]]),d(s(I),{class:"grid-rect"}),t[1]||(t[1]=a("div",{class:"editor-center"},null,-1))])])}}}),X=A(U,[["__scopeId","data-v-5ad6d4fa"]]);export{X as default};
