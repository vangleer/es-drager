import{d as V,r as y,y as F,z as G,o as r,c as g,h as c,k as d,w as l,e as p,t as f,u as s,f as w,F as J,a as K,b as x,A as j,m as q,p as C,i as L,B,n as D,_ as A}from"./index-c9bc5507.js";import{G as I}from"./GridRect-b5d0fe6b.js";const M={class:"es-container"},P={class:"es-tools"},R={class:"es-editor"},T=V({__name:"markline",setup(U){const a=y({left:null,top:null}),_=y({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),u=S(_);function E(){u.record()}function N(t,n){Object.keys(t).forEach(e=>{n[e]=t[e]})}function S(t){const n=[];let e=-1;const o=()=>{console.log("redo",e,n),e<n.length-1&&(e++,t.value.componentList=m(n[e]))},i=()=>{console.log("undo",e,n),e>=0&&(e--,n[e]&&(t.value.componentList=m(n[e])))},v=()=>{n[++e]=m(t.value.componentList)};v();const h=z=>{const{ctrlKey:O,key:k}=z;O&&(k==="z"?i():k==="y"&&o())};return window.addEventListener("keydown",h),F(()=>{window.removeEventListener("keydown",h)}),{redo:o,undo:i,record:v}}function m(t){return JSON.parse(JSON.stringify(t))}function b(t){a.value=t}return(t,n)=>{const e=G("el-button");return r(),g("div",M,[c("div",P,[d(e,{type:"primary",onClick:s(u).undo},{default:l(()=>[p(f(s(w)("examples.undo")),1)]),_:1},8,["onClick"]),d(e,{type:"primary",onClick:s(u).redo},{default:l(()=>[p(f(s(w)("examples.redo")),1)]),_:1},8,["onClick"])]),c("div",R,[(r(!0),g(J,null,K(_.value.componentList,o=>(r(),x(s(C),q(o,{snap:"","snap-threshold":10,markline:"",onChange:i=>N(i,o),onDragEnd:E}),{default:l(()=>[(r(),x(j(o.component),null,{default:l(()=>[p(f(o.text),1)]),_:2},1024))]),_:2},1040,["onChange"]))),256)),d(s(C),{width:100,height:100,left:200,top:200,snap:"",markline:b},{default:l(()=>[p(" custom markline ")]),_:1}),L(c("div",{class:"es-editor-markline-left",style:D({left:a.value.left+"px"})},null,4),[[B,a.value.left]]),L(c("div",{class:"es-editor-markline-top",style:D({top:a.value.top+"px"})},null,4),[[B,a.value.top]]),d(s(I),{class:"grid-rect"})])])}}});const W=A(T,[["__scopeId","data-v-d372880d"]]);export{W as default};
