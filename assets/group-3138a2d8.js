import{d as S,r,f as T,eG as I,o as p,c as h,g as x,j as d,w as c,e as f,F as N,a as U,b as C,eH as V,m as k,t as j,eP as w,u as l,eQ as F,eR as P,eS as M,_ as $}from"./index-d7db7ed4.js";import{G as H}from"./GridRect-78e1e398.js";import{_ as O}from"./index-02f40883.js";import{u as Q,A as X}from"./useArea-d10cf773.js";const Y={class:"es-container"},q={class:"es-tools"},z=S({__name:"group",setup(J){const n=r({elements:[{id:M(),component:"div",text:"div1",width:100,height:100,left:100,top:100,style:{border:"1px solid #3a7afe"}},{id:M(),component:"div",text:"div2",width:100,height:100,top:200,left:300,style:{border:"1px solid #3a7afe"}}]}),v=r(null),_=T(()=>{var t;return((t=v.value)==null?void 0:t.getBoundingClientRect())||{}}),m=r(-1),g=r(),{areaSelected:R,onEditorMouseDown:y,onAreaMove:b,onAreaUp:G}=Q(n,g),a=r({prevLeft:0,prevTop:0});function D(t){R.value||n.value.elements.forEach(s=>s.selected=!1);const e=n.value.elements[t];e.selected=!0,a.value.prevLeft=e.left,a.value.prevTop=e.top,m.value=t}function A(t){const e=t.left-a.value.prevLeft,s=t.top-a.value.prevTop;n.value.elements.forEach((o,i)=>{o.selected&&m.value!==i&&(o.left+=e,o.top+=s)}),a.value.prevLeft=t.left,a.value.prevTop=t.top}function B(t,e){Object.keys(t).forEach(s=>{e[s]=t[s]})}function E(){n.value.elements=F(n.value.elements,_.value)}function L(){n.value.elements=P(n.value.elements,_.value)}return(t,e)=>{const s=I("el-button");return p(),h("div",Y,[x("div",q,[d(s,{type:"primary",onClick:E},{default:c(()=>[f("组合")]),_:1}),d(s,{type:"primary",onClick:L},{default:c(()=>[f("拆分")]),_:1})]),x("div",{ref_key:"editorRef",ref:v,class:"es-editor",onMousedown:e[3]||(e[3]=(...o)=>l(y)&&l(y)(...o))},[(p(!0),h(N,null,U(n.value.elements,(o,i)=>(p(),C(l(O),k(o,{rotatable:"",onDragStart:u=>D(i),onDrag:e[0]||(e[0]=u=>A(u)),onChange:u=>B(u,o),onClick:e[1]||(e[1]=w(()=>{},["stop"])),onMousedown:e[2]||(e[2]=w(()=>{},["stop"]))}),{default:c(()=>[(p(),C(V(o.component),k(o.props,{style:{...o.style,width:"100%",height:"100%"}}),{default:c(()=>[f(j(o.text),1)]),_:2},1040,["style"]))]),_:2},1040,["onDragStart","onChange"]))),256)),d(H),d(X,{ref_key:"areaRef",ref:g,onMove:l(b),onUp:l(G)},null,8,["onMove","onUp"])],544)])}}});const te=$(z,[["__scopeId","data-v-a9537d23"]]);export{te as default};
