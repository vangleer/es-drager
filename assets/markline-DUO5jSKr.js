import{d as V,r as y,y as j,o as i,c as g,j as c,g as d,w as l,e as u,t as f,u as s,f as w,z as q,F,a as G,b as C,A as J,m as K,k as x,l as L,B,q as D,_ as A}from"./index-O4UMQ5WV.js";import{G as I}from"./GridRect-B2GJd3_G.js";const M={class:"es-container"},P={class:"es-tools"},R={class:"es-editor"},T=V({__name:"markline",setup(U){const a=y({left:null,top:null}),v=y({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),p=S(v);function E(){p.record()}function N(o,t){Object.keys(o).forEach(e=>{t[e]=o[e]})}function S(o){const t=[];let e=-1;const n=()=>{console.log("redo",e,t),e<t.length-1&&(e++,o.value.componentList=m(t[e]))},r=()=>{console.log("undo",e,t),e>=0&&(e--,t[e]&&(o.value.componentList=m(t[e])))},_=()=>{t[++e]=m(o.value.componentList)};_();const h=z=>{const{ctrlKey:O,key:k}=z;O&&(k==="z"?r():k==="y"&&n())};return window.addEventListener("keydown",h),j(()=>{window.removeEventListener("keydown",h)}),{redo:n,undo:r,record:_}}function m(o){return JSON.parse(JSON.stringify(o))}function b(o){a.value=o}return(o,t)=>{const e=q("el-button");return i(),g("div",M,[c("div",P,[d(e,{type:"primary",onClick:s(p).undo},{default:l(()=>[u(f(s(w)("examples.undo")),1)]),_:1},8,["onClick"]),d(e,{type:"primary",onClick:s(p).redo},{default:l(()=>[u(f(s(w)("examples.redo")),1)]),_:1},8,["onClick"])]),c("div",R,[(i(!0),g(F,null,G(v.value.componentList,n=>(i(),C(s(x),K({ref_for:!0},n,{snap:"","snap-threshold":10,markline:"",onChange:r=>N(r,n),onDragEnd:E}),{default:l(()=>[(i(),C(J(n.component),null,{default:l(()=>[u(f(n.text),1)]),_:2},1024))]),_:2},1040,["onChange"]))),256)),d(s(x),{width:100,height:100,left:200,top:200,snap:"",markline:b},{default:l(()=>t[0]||(t[0]=[u(" custom markline ")])),_:1}),L(c("div",{class:"es-editor-markline-left",style:D({left:a.value.left+"px"})},null,4),[[B,a.value.left]]),L(c("div",{class:"es-editor-markline-top",style:D({top:a.value.top+"px"})},null,4),[[B,a.value.top]]),d(s(I),{class:"grid-rect"})])])}}}),W=A(T,[["__scopeId","data-v-d372880d"]]);export{W as default};
